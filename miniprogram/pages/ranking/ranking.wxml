<!-- pages/ranking/ranking.wxml -->
<view class="ranking-page">
  <!-- æ’è¡Œæ¦œTabåˆ‡æ¢ -->
  <view class="ranking-tabs">
    <scroll-view scroll-x="{{true}}" class="tabs-scroll" enhanced show-scrollbar="{{false}}">
      <view class="tabs-container">
        <view class="tab-item {{index === activeRankIndex ? 'active' : ''}}" 
              wx:for="{{rankTypes}}" 
              wx:key="id"
              data-index="{{index}}"
              bindtap="onTabChange">
          <text>{{item.name}}</text>
          <view class="tab-line" wx:if="{{index === activeRankIndex}}"></view>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- æ’è¡Œæ¦œå›¾ä¹¦åˆ—è¡¨ -->
  <view class="ranking-list" wx:if="{{books.length > 0}}">
    <view class="book-item" 
          wx:for="{{books}}" 
          wx:key="id" 
          bindtap="onTapBook" 
          data-book-id="{{item.id}}">
      <!-- æ’å -->
      <view class="rank-number {{item.rankNum <= 3 ? 'top-rank' : ''}}">{{item.rankNum}}</view>
      
      <!-- å›¾ä¹¦ä¿¡æ¯ -->
      <view class="book-info">
        <!-- å›¾ä¹¦å°é¢ -->
        <view class="book-cover-container">
          <image class="book-cover" src="{{item.coverUrl}}" mode="aspectFill" lazy-load></image>
        </view>
        
        <!-- å›¾ä¹¦è¯¦æƒ… -->
        <view class="book-details">
          <view class="book-title">{{item.title}}</view>
          <view class="book-author">{{item.author}}</view>
          <view class="book-genre">{{item.genre}}</view>
          <view class="book-score">
            <text class="score-value">{{item.score}}</text>
            <text class="score-text">åˆ†</text>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:elif="{{!firstLoad && !loading}}">
    <view class="empty-icon">ğŸ†</view>
    <view class="empty-text">æš‚æ— æ’è¡Œæ•°æ®</view>
  </view>
  
  <!-- åŠ è½½ä¸­æç¤º -->
  <view class="loading-container" wx:if="{{loading && firstLoad}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>
  
  <!-- åŠ è½½æ›´å¤š -->
  <view class="loading-more" wx:if="{{loading && !firstLoad}}">
    <view class="loading-dot"></view>
    <view class="loading-dot"></view>
    <view class="loading-dot"></view>
  </view>
  
  <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
  <view class="no-more" wx:if="{{!loading && !hasMore && books.length > 0}}">
    æ²¡æœ‰æ›´å¤šäº†
  </view>
  
  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-bottom"></view>
</view> 
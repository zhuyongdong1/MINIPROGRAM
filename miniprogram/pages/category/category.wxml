<!-- pages/category/category.wxml -->
<view class="category-page">
  <!-- Â∑¶Âè≥Â∏ÉÂ±ÄÂÆπÂô® -->
  <view class="category-container">
    <!-- Â∑¶‰æßÂàÜÁ±ªÂØºËà™ -->
    <view class="category-sidebar">
      <scroll-view scroll-y class="category-scroll">
        <view 
          wx:for="{{filters}}" 
          wx:key="id" 
          class="category-item {{index === activeFilterIndex ? 'active' : ''}}" 
          bindtap="onFilterChange" 
          data-index="{{index}}"
        >
          {{item.name}}
        </view>
      </scroll-view>
    </view>
    
    <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
    <view class="category-content">
      <!-- Â≠êÁ≠õÈÄâÈ°π -->
      <scroll-view class="sub-filter-bar" scroll-x enhanced show-scrollbar="{{false}}">
        <view 
          wx:for="{{subFilters}}" 
          wx:key="id" 
          class="sub-filter-item {{index === activeSubFilterIndex ? 'active' : ''}}" 
          bindtap="onSubFilterChange" 
          data-index="{{index}}"
        >
          {{item.name}}
        </view>
      </scroll-view>
      
      <!-- Âõæ‰π¶ÂàóË°® -->
      <scroll-view 
        scroll-y 
        class="book-scroll" 
        bindscrolltolower="onReachBottom"
        enable-back-to-top
      >
        <view class="category-list" wx:if="{{books.length > 0}}">
          <book-list 
            books="{{books}}"
            horizontal="{{false}}"
            columnCount="2"
            bindtap="onTapBook"
          />
        </view>
        
        <!-- ÊöÇÊó†Êï∞ÊçÆ -->
        <view class="empty-container" wx:elif="{{!firstLoad && !loading}}">
          <view class="empty-icon">üìö</view>
          <view class="empty-text">ÊöÇÊó†Êï∞ÊçÆ</view>
        </view>
        
        <!-- Âä†ËΩΩ‰∏≠ÊèêÁ§∫ -->
        <view class="loading-container" wx:if="{{loading && firstLoad}}">
          <view class="loading-spinner"></view>
          <view class="loading-text">Âä†ËΩΩ‰∏≠...</view>
        </view>
        
        <!-- Âä†ËΩΩÊõ¥Â§ö -->
        <view class="loading-more" wx:if="{{loading && !firstLoad}}">
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
        </view>
        
        <!-- Ê≤°ÊúâÊõ¥Â§öÊï∞ÊçÆ -->
        <view class="no-more" wx:if="{{!loading && !hasMore && books.length > 0}}">
          Ê≤°ÊúâÊõ¥Â§ö‰∫Ü
        </view>
        
        <!-- Â∫ïÈÉ®ÂÆâÂÖ®Âå∫Âüü -->
        <view class="safe-bottom"></view>
      </scroll-view>
    </view>
  </view>
</view> 